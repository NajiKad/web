{"ast":null,"code":"var _jsxFileName = \"/home/jcryuu/cscd488/newRepo/web/inavig8-admin/src/components/App.js\";\nimport React from 'react';\nimport Logo from './Logo';\nimport Header from './Header';\nimport Nav from './Nav';\nimport Main from './Main';\nimport Footer from './Footer';\nimport './App.css';\nimport Login from './Login';\nimport Auth from '@aws-amplify/auth';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      admin: JSON.parse(localStorage.getItem('admin')) || [],\n      nav: 'dashboard'\n    };\n\n    this.onLogin = user => {\n      // will need to authenticate with Cognito before setting state\n      this.setState({\n        admin: {\n          username: user.username,\n          password: user.password,\n          email: user.attributes.email,\n          first_name: user.attributes.name.split(\" \").length == 2 ? user.attributes.name.split(\" \")[0] : \"\",\n          last_name: user.attributes.name.split(\" \").length == 2 ? user.attributes.name.split(\" \")[1] : \"\",\n          role: 'Admin'\n        }\n      }, () => {\n        localStorage.setItem('admin', JSON.stringify(this.state.admin));\n      });\n    };\n\n    this.onNavSelection = nav => {\n      this.setState({\n        nav\n      });\n    };\n  }\n\n  render() {\n    Auth.currentSession().then(data => {\n      // this.setState(data);\n      console.log(data);\n      var s = {\n        admin: {\n          username: data.accessToken.payload.username,\n          password: \"\",\n          email: data.idToken.payload.email,\n          first_name: \"firstname\",\n          last_name: \"lastname\",\n          role: \"Admin\"\n        }\n      }; // this.setState(s);\n    }).catch(err => console.log(err));\n    console.log(\"this.state.admin.length: \", this.state.admin.length);\n\n    if (!this.state.admin || this.state.admin.length == 0) {\n      return React.createElement(Login, {\n        onLogin: this.onLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"div\", {\n        className: \"container-loggIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(Header, {\n        profile: this.state.admin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(Nav, {\n        onNavSelection: this.onNavSelection,\n        highlight: this.state.nav,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(Main, {\n        page: this.state.nav,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }));\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/jcryuu/cscd488/newRepo/web/inavig8-admin/src/components/App.js"],"names":["React","Logo","Header","Nav","Main","Footer","Login","Auth","App","Component","state","admin","JSON","parse","localStorage","getItem","nav","onLogin","user","setState","username","password","email","attributes","first_name","name","split","length","last_name","role","setItem","stringify","onNavSelection","render","currentSession","then","data","console","log","s","accessToken","payload","idToken","catch","err"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAO,WAAP;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAOC,IAAP,MAAiB,mBAAjB;;AAGA,MAAMC,GAAN,SAAkBR,KAAK,CAACS,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAKhCC,KALgC,GAKxB;AACNC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,KAA6C,EAD9C;AAENC,MAAAA,GAAG,EAAE;AAFC,KALwB;;AAAA,SAUhCC,OAVgC,GAUrBC,IAAD,IAAU;AAElB;AACA,WAAKC,QAAL,CACE;AACER,QAAAA,KAAK,EAAE;AACLS,UAAAA,QAAQ,EAAEF,IAAI,CAACE,QADV;AAELC,UAAAA,QAAQ,EAAEH,IAAI,CAACG,QAFV;AAGLC,UAAAA,KAAK,EAAEJ,IAAI,CAACK,UAAL,CAAgBD,KAHlB;AAILE,UAAAA,UAAU,EAAEN,IAAI,CAACK,UAAL,CAAgBE,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgCC,MAAhC,IAA0C,CAA1C,GAA8CT,IAAI,CAACK,UAAL,CAAgBE,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAA9C,GAAmF,EAJ1F;AAKLE,UAAAA,SAAS,EAAEV,IAAI,CAACK,UAAL,CAAgBE,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgCC,MAAhC,IAA0C,CAA1C,GAA8CT,IAAI,CAACK,UAAL,CAAgBE,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAA9C,GAAmF,EALzF;AAMLG,UAAAA,IAAI,EAAE;AAND;AADT,OADF,EAWG,MAAM;AACPf,QAAAA,YAAY,CAACgB,OAAb,CAAqB,OAArB,EAA8BlB,IAAI,CAACmB,SAAL,CAAe,KAAKrB,KAAL,CAAWC,KAA1B,CAA9B;AACD,OAbD;AAeD,KA5B+B;;AAAA,SA8BhCqB,cA9BgC,GA8BdhB,GAAD,IAAS;AAExB,WAAKG,QAAL,CACE;AACEH,QAAAA;AADF,OADF;AAMD,KAtC+B;AAAA;;AAwChCiB,EAAAA,MAAM,GAAG;AAEP1B,IAAAA,IAAI,CAAC2B,cAAL,GACCC,IADD,CACMC,IAAI,IAAI;AACZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,UAAIG,CAAC,GAAG;AACN5B,QAAAA,KAAK,EAAE;AACLS,UAAAA,QAAQ,EAAEgB,IAAI,CAACI,WAAL,CAAiBC,OAAjB,CAAyBrB,QAD9B;AAELC,UAAAA,QAAQ,EAAE,EAFL;AAGLC,UAAAA,KAAK,EAAEc,IAAI,CAACM,OAAL,CAAaD,OAAb,CAAqBnB,KAHvB;AAILE,UAAAA,UAAU,EAAE,WAJP;AAKLI,UAAAA,SAAS,EAAE,UALN;AAMLC,UAAAA,IAAI,EAAE;AAND;AADD,OAAR,CAHY,CAaZ;AAID,KAlBD,EAmBCc,KAnBD,CAmBOC,GAAG,IAAIP,OAAO,CAACC,GAAR,CAAYM,GAAZ,CAnBd;AAqBAP,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyC,KAAK5B,KAAL,CAAWC,KAAX,CAAiBgB,MAA1D;;AACA,QAAI,CAAC,KAAKjB,KAAL,CAAWC,KAAZ,IAAqB,KAAKD,KAAL,CAAWC,KAAX,CAAiBgB,MAAjB,IAA2B,CAApD,EAAuD;AACrD,aAAO,oBAAC,KAAD;AAAO,QAAA,OAAO,EAAE,KAAKV,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAFD,MAEO;AACL,aAEE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKP,KAAL,CAAWC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,GAAD;AAAK,QAAA,cAAc,EAAE,KAAKqB,cAA1B;AAA0C,QAAA,SAAS,EAAE,KAAKtB,KAAL,CAAWM,GAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EAIE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAE,KAAKN,KAAL,CAAWM,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,EAKE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CAFF;AAWD;AAIJ;;AAlFiC;;AAsFlC,eAAeR,GAAf","sourcesContent":["import React from 'react';\nimport Logo from './Logo';\nimport Header from './Header';\nimport Nav from './Nav';\nimport Main from './Main';\nimport Footer from './Footer';\nimport './App.css';\nimport Login from './Login';\n\nimport Auth from '@aws-amplify/auth';\n\n\nclass App extends React.Component {\n\n  // state = {\n  //   admin: null\n  // }\n  state = {\n    admin: JSON.parse(localStorage.getItem('admin')) || [],\n    nav: 'dashboard',\n  }\n\n  onLogin = (user) => {\n\n    // will need to authenticate with Cognito before setting state\n    this.setState(\n      {\n        admin: {\n          username: user.username,\n          password: user.password,\n          email: user.attributes.email,\n          first_name: user.attributes.name.split(\" \").length == 2 ? user.attributes.name.split(\" \")[0] : \"\",\n          last_name: user.attributes.name.split(\" \").length == 2 ? user.attributes.name.split(\" \")[1] : \"\",\n          role: 'Admin',\n        },\n      }\n      ,() => {\n      localStorage.setItem('admin', JSON.stringify(this.state.admin))\n    });\n\n  }\n\n  onNavSelection = (nav) => {\n\n    this.setState (\n      {\n        nav\n      }\n    );\n\n  }\n\n  render() {\n\n    Auth.currentSession()\n    .then(data => {\n      // this.setState(data);\n      console.log(data);\n      var s = {\n        admin: {\n          username: data.accessToken.payload.username,\n          password: \"\",\n          email: data.idToken.payload.email,\n          first_name: \"firstname\",\n          last_name: \"lastname\",\n          role: \"Admin\"\n        }\n      };\n      // this.setState(s);\n\n  \n\n    })\n    .catch(err => console.log(err));\n\n    console.log(\"this.state.admin.length: \", this.state.admin.length);\n    if (!this.state.admin || this.state.admin.length == 0) {\n      return <Login onLogin={this.onLogin} />;\n    } else {\n      return (\n\n        <div className=\"container-loggIn\">\n          <Logo />\n          <Header profile={this.state.admin} />\n          <Nav onNavSelection={this.onNavSelection} highlight={this.state.nav} />\n          <Main page={this.state.nav} />\n          <Footer />\n        </div>\n\n      )\n    }\n\n    \n\n}\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}